@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600&family=Source+Sans+3:wght@400;500;600&family=Source+Serif+4:opsz,wght@8..60,350..650&display=swap');

/* Claude 风格全局样式 */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --topbar-h: 64px;
  --bg-base: #f7f5f2;
  --bg-panel: #fdfbf9;
  --bg-soft: #f2ede7;
  --text-strong: #2a2420;
  --text-main: #3a342f;
  --text-subtle: #686059;
  --border-soft: #e5e0db;
  --border-medium: #D8CBBE;
  --border-warm: #d4c4b0;
  --font-ui: 'Source Sans 3', 'Avenir Next', 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Noto Sans CJK SC', 'Microsoft YaHei', sans-serif;
  --font-reading: 'Source Serif 4', 'Noto Serif SC', 'Iowan Old Style', 'Palatino Linotype', 'Book Antiqua', 'Charter', 'Bitstream Charter', 'Source Han Serif SC', 'Songti SC', serif;
  --font-mono: 'SF Mono', 'Consolas', 'Monaco', 'Menlo', 'Courier New', monospace;
  --measure: 1040px;
}

/* 下拉菜单动画 */
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes popInSoft {
  from {
    opacity: 0;
    transform: translateY(6px) scale(0.985);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* 自定义滚动条 - Claude 风格 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(138, 127, 118, 0.3);
  border-radius: 4px;
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(138, 127, 118, 0.5);
}

body {
  font-family: var(--font-ui);
  font-weight: 400;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  /* Claude 米黄色背景 */
  background: var(--bg-base);
  color: var(--text-main);
  height: 100vh;
  overflow: hidden;
  font-size: 16px;
  line-height: 1.64;
  letter-spacing: 0.001em;
}

code {
  font-family: var(--font-mono);
}

#root {
  height: 100vh;
  overflow: hidden;
  background: var(--bg-base);
}

/* Claude 风格 Markdown 样式 */
.markdown-content {
  font-family: var(--font-reading);
  font-optical-sizing: auto;
  line-height: 1.74;
  color: var(--text-main);
  max-width: 100%;
  font-size: 17px;
  font-weight: 400;
  letter-spacing: 0.0008em;
  font-feature-settings: 'kern' 1, 'liga' 1, 'calt' 1;
  font-variant-numeric: oldstyle-nums;
  hanging-punctuation: first;
}

.markdown-content h1,
.markdown-content h2,
.markdown-content h3,
.markdown-content h4 {
  font-family: var(--font-reading);
  margin-top: 1.28em;
  margin-bottom: 0.48em;
  font-weight: 580;
  color: var(--text-strong);
  letter-spacing: -0.009em;
  line-height: 1.24;
}

.markdown-content p {
  margin-bottom: 0.88em;
  color: var(--text-main);
}

.markdown-content li {
  margin-bottom: 0.3em;
}

.markdown-content a {
  color: #866344;
  text-underline-offset: 0.18em;
  text-decoration-thickness: 1px;
}

.markdown-content a:hover {
  color: #6f4c30;
}

.markdown-content code {
  font-family: var(--font-mono);
  background: #efeae3;
  color: #7f3e35;
  padding: 3px 7px;
  border-radius: 5px;
  font-size: 0.9em;
  letter-spacing: 0;
}

.markdown-content strong {
  color: var(--text-strong);
  font-weight: 600;
}

.markdown-content pre {
  background: #faf8f6;
  border: 1px solid var(--border-soft);
  color: var(--text-main);
  padding: 1.08em;
  border-radius: 10px;
  overflow-x: auto;
  margin: 1.05em 0;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.03);
  line-height: 1.55;
}

.markdown-content pre code {
  background: none;
  padding: 0;
  color: inherit;
}

.markdown-content blockquote {
  border-left: 3px solid var(--border-warm);
  padding-left: 1.05em;
  margin: 1em 0;
  color: var(--text-subtle);
  font-style: italic;
}

.markdown-content ul,
.markdown-content ol {
  margin-left: 1.7em;
  margin-bottom: 0.95em;
}

.markdown-content table {
  border-collapse: collapse;
  width: 100%;
  margin: 1.2em 0;
  border: 1px solid var(--border-soft);
  border-radius: 8px;
  overflow: hidden;
  font-family: var(--font-ui);
  font-size: 15px;
}

.markdown-content th,
.markdown-content td {
  border: 1px solid var(--border-soft);
  padding: 10px 14px;
  text-align: left;
}

.markdown-content th {
  background: var(--bg-soft);
  font-weight: 600;
  color: var(--text-strong);
}

/* 数学公式样式 */
.katex {
  font-size: 1.05em;
}

.katex-display {
  margin: 1.5em 0;
  overflow-x: auto;
  overflow-y: hidden;
  text-align: center;
  padding: 0.5em 0;
}

.katex-display > .katex {
  display: inline-block;
  text-align: left;
  max-width: 100%;
}

/* ========== 全局按钮点击反馈优化 (参考 x.com) ========== */
/* 
 * 核心原则：
 * - 按下瞬间：0ms 延迟，立即缩小
 * - 松开后：150ms 弹性回弹动画
 * - cubic-bezier(0.34, 1.56, 0.64, 1) 产生轻微"过冲"效果
 */
button {
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  /* 默认状态（松开时）：弹性回弹过渡 */
  transition: transform 0.15s cubic-bezier(0.34, 1.56, 0.64, 1),
              background-color 0.1s ease-out,
              border-color 0.1s ease-out,
              box-shadow 0.1s ease-out;
}

/* 按下时：立即缩小，无过渡延迟 */
button:active {
  transform: scale(0.95);
  transition: transform 0s;
}

/* 
 * 特殊类：排除内部有 transform 动画的按钮
 * 用于 ThinkingBlock 等有旋转箭头的按钮
 */
button.no-scale-effect:active {
  transform: none;
  opacity: 0.85;
}

/* 可点击元素的通用优化 */
[role="button"],
.clickable {
  cursor: pointer;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  transition: transform 0.15s cubic-bezier(0.34, 1.56, 0.64, 1);
}

[role="button"]:active,
.clickable:active {
  transform: scale(0.97);
  transition: transform 0s;
}
